---
title: linux vim详解
date: 2017-10-25 10:38:28
category: 服务器
tags:
- 文件
- linux
- shell
---

## 直接在bash中使用vim教学
```bash
vimtutor
```

## vim的三种工作模式
* 命令模式(打开文件默认先进入命令模式)
* 编辑模式
* 末行模式(行跳转、查询、退出等)

## 命令模式相关
### 保存退出
ZZ

### 代码格式化
gg=G

### 光标的移动
* 上下左右：HJKL（分别对应左下上右）

### 光标移动到行首
0（零）

### 光标移动到行尾
$

### 光标移动到文件首部
gg

### 光标移动到文件尾部
G

### 跳转到123行
123G或123gg
另外输入行号n按下回车：当前行向下移动n行

### 删除命令(本质上是剪切操作)
* 删除光标前的字符：X
* 删除光标后的字符：x
* 删除单词：dw，删除整个单词光标应该在单词的最前边
* 删除光标前字符串：d0
* 删除光标后字符串：d$(D)
* 删除光标所在行：dd
* 删除多行：{数字}dd（从当前光标处下数n行）

### 撤销反撤销
* 撤销：u
* 反撤销：ctrl+r

### 复制粘贴
* 复制一行：yy
* 复制多行：{数字}yy
* p(小写)：粘贴到光标的下边一行
* P(大写)：粘贴到光标的上边一行

### 可视模式：v
* 移动光标：hjkl（大多电脑上下左右也行）
* 复制：y
* 删除：d
* 粘贴：p(小写)：粘贴到光标的后边，P(大写)：粘贴到光标前边

### 查找
/{查找关键字}，切换按n（向下）/N（向上），向下搜索
？{查找关键字}，切换按n（向下）/N（向上），向上搜索
#：光标移动到待搜索单词上边，再按#

### 命令模式切换到编辑模式
* a：从光标后开始插入字符
* A：行尾插入字符
* i：光标前插入字符
* I：行首插入字符
* o：光标下创建新行
* O：光标上创建新行
* s：删除光标盖住的字符
* S：删除光标所在行

### 切换回命令模式
ESC

## 末行模式相关
### 保存不退出
:w

### 保存退出
:wq或:x

### 光标跳到n行
:n(n是数字)

### 未修改退出
:q

### 放弃修改退出
:q!

### 显示/取消显示行号
:set nu    //显示
:set nu!    //不显示

### 字符串替换
:s/{被替换值}/{新替换值}    //替换当前一个
:s/{被替换值}/{新替换值}/g    //直接替换当前行所有的
:s/{被替换值}/{新替换值}/gc    //直接替换当前行所有的并每一个都确认
:22,28s/{被替换值}/{新替换值}[/gc]    //替换22-28行
:%s/{被替换值}/{新替换值}[/gc]    //替换整个文本

### 一个文件分屏
:sp    //水平分屏
:vsp    //垂直分屏

### 多文件分屏
:vsp {文件}
:sp {文件}

### 打开的时候分屏
```bash
vim -o {文件名} {文件名} ...    //水平分多个屏
vim -O {文件名} {文件名} {文件名} ...   //垂直分多个屏
```

### 分屏切换
ctrl+w两次：分屏切换

### 分屏的退出
:qall    //全部退出
:wall    //保存所有的
:wqall    //保存并退出所有的

### 执行shell命令
:!{shell命令}
e.g.
```bash
:!pwd
```

## vim配置文件
### 配置文件位置
* 用户级别：~/.vimrc
* 系统级别：/etc/vim/vimrc或/etc/vimrc
